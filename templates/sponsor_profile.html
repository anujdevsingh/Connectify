{% extends "base.html" %} {% block title %}Sponsor Profile{% endblock %} {%
block content %}
<div class="container mt-5">
  <h2 class="text-center">Welcome {{ sponsor.user.username }}</h2>

  <!-- Section for Campaigns -->
  <div class="mt-4">
    <h3>Active Campaigns</h3>
    {% if campaigns %}
    <div class="list-group">
      {% for campaign in campaigns %}
      <div class="list-group-item">
        <h5 class="mb-1">{{ campaign.title }}</h5>
        <p class="mb-1">{{ campaign.description }}</p>
        <small
          >Niche: {{ campaign.niche }} | Budget: ${{ campaign.budget }}</small
        >
        <div class="mt-2">
          <a
            href="{{ url_for('update_campaign', campaign_id=campaign.id) }}"
            class="btn btn-primary btn-sm"
            >Edit</a
          >
          <form
            action="{{ url_for('delete_campaign', campaign_id=campaign.id) }}"
            method="post"
            class="d-inline"
          >
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p>No campaigns found.</p>
    {% endif %}
  </div>

  <!-- Section for New Requests -->
  <div class="mt-4">
    <h3>New Requests</h3>
    {% if new_requests %}
    <div class="list-group">
      {% for request in new_requests %} {% if request.status == 'pending' %}
      <div class="list-group-item">
        <h5 class="mb-1">{{ request.ad_name }}</h5>
        <small>Requested by: {{ request.influencer_name }}</small>
        <div class="mt-2">
          <form
            action="{{ url_for('accept_request', request_id=request.id) }}"
            method="post"
            class="d-inline"
          >
            <button type="submit" class="btn btn-success btn-sm">Accept</button>
          </form>
          <form
            action="{{ url_for('reject_request', request_id=request.id) }}"
            method="post"
            class="d-inline"
          >
            <button type="submit" class="btn btn-danger btn-sm">Reject</button>
          </form>
        </div>
      </div>
      {% endif %}{% endfor %}
    </div>
    {% else %}
    <p>No new requests.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
